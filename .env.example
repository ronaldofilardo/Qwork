# .env.example - Exemplo de variáveis de ambiente para o projeto
# -----------------------------------------------------------------------------
# INSTRUÇÕES:
# - Faça uma cópia deste arquivo como `.env.local` e preencha com valores reais
# - Nunca comite segredos (senhas, chaves) no repositório
# - No CI, defina `TEST_DATABASE_URL` como secret (ex.: seu provedor CI -> Settings -> Secrets)

# Ambiente
NODE_ENV=development

# Banco de Produção (exemplo Neon - mantenha como placeholder)
DATABASE_URL=postgresql://user:YOUR_PROD_PASSWORD@ep-xxxx.region.aws.neon.tech/bps_brasil?sslmode=require

# Banco Local (desenvolvimento)
# NOTA: O time decidiu que o ambiente de desenvolvimento pode apontar para o banco Neon quando necessário.
# WARNING: The example below points to Neon production DB. Using it will run dev against production data and is risky.
# Use only if you understand and accept the implications.
LOCAL_DATABASE_URL=postgresql://neondb_owner:npg_J2QYqn5oxCzp@ep-divine-sky-acuderi7-pooler.sa-east-1.aws.neondb?sslmode=require&channel_binding=require

# Banco de Testes (OBRIGATÓRIO para rodar os testes):
# Deve apontar para um banco de testes (nome contendo 'test', ex: nr-bps_db_test)
# Padrão: usuário 'postgres', senha '123456'
# Exemplo: postgresql://postgres:123456@localhost:5432/nr-bps_db_test
TEST_DATABASE_URL=postgresql://postgres:YOUR_PASSWORD@localhost:5432/nr-bps_db_test

# Sessão (substitua por uma string segura em produção)
SESSION_SECRET=your-session-secret

# URL Base da Aplicação (para links de pagamento e redirecionamentos)
# Em desenvolvimento: http://localhost:3000
# Em produção: https://seu-dominio.vercel.app
NEXT_PUBLIC_BASE_URL=http://localhost:3000

# Backblaze S2 (S3-compatible) - Configurações de Storage de Laudos
# Use 's2' para Backblaze S2 ou 'b2' para B2 (S3-compat)
# Exemplos e placeholders (NÃO comitar chaves reais):
BACKBLAZE_PROVIDER=s2
# Endpoint/Região para S2 (ex.: https://s3.us-east-005.backblazeb2.com)
BACKBLAZE_S2_ENDPOINT=https://s3.us-east-005.backblazeb2.com
BACKBLAZE_S2_REGION=us-east-005
# Alternativamente (compatibilidade legada):
BACKBLAZE_ENDPOINT=
BACKBLAZE_REGION=
# Bucket e credenciais (substitua pelos seus valores):
BACKBLAZE_BUCKET=laudos-qwork
# Application Key ID (ex.: começa com `0052`, identif. da Key S3 — NÃO é a secret)
# Exemplo: BACKBLAZE_KEY_ID=0052a8144c041210000000004
BACKBLAZE_KEY_ID=0052...
# Application Key (secret) — começa com `K` e tem ~>=32 caracteres
# Exemplo: BACKBLAZE_APPLICATION_KEY=Kxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# ========================================
# ASAAS PAYMENT GATEWAY
# ========================================
# Obtenha sua API Key em: https://sandbox.asaas.com ou https://www.asaas.com
# Para testes, use o ambiente Sandbox primeiro!

# API Key do Asaas (obrigatória)
ASAAS_API_KEY=your_api_key_here

# URL da API (sandbox para testes, produção para deploy)
# Sandbox: https://api-sandbox.asaas.com/v3
# Produção: https://api.asaas.com/v3
ASAAS_API_URL=https://api-sandbox.asaas.com/v3

# Secret para validar webhooks (gere um token aleatório)
# Exemplo: openssl rand -base64 32
ASAAS_WEBHOOK_SECRET=your_webhook_secret_here
BACKBLAZE_APPLICATION_KEY=Kxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
# Opcional: nome da Application Key (só para referência, não é obrigatório)
# BACKBLAZE_KEY_NAME=Qwork

# Emissão imediata de laudos
# Por padrão o sistema executa emissão imediata quando um lote fica 'concluido'.
# Para pular essa emissão (somente para desenvolvimento) defina:
# SKIP_IMMEDIATE_EMISSION=1
# IMPORTANTE: Em produção esse valor será IGNORADO (SKIP não tem efeito em NODE_ENV=production).

# Observações:
# - O bucket padrão 'laudos-qwork' costuma estar configurado como PRIVATE. O backend faz streaming via SDK.
# - Se desejar que o frontend baixe direto, implemente geração de presigned URLs ou torne objetos públicos (não recomendado).
# - Configure CORS se o frontend acessar o bucket diretamente.

# DICAS RÁPIDAS:
# - Atualize `.env.local` no seu ambiente local e adicione-o ao .gitignore
# - Credenciais padrão: usuário 'postgres', senha '123456'
# - Em PowerShell (temporário):
#     $env:TEST_DATABASE_URL = "postgresql://postgres:123456@localhost:5432/nr-bps_db_test"; pnpm test
# - Em CI: configure `TEST_DATABASE_URL` como secret e NÃO o armazene em arquivos versionados

# RELAT√ìRIO DE COMPARA√á√ÉO DE BANCOS DE DADOS\n\nData: 2026-02-06T17:04:37.119Z\n\n**DESENVOLVIMENTO (Local)** vs **PRODU√á√ÉO (Neon)**\n\n## üìä TABELAS\n\n### ‚ö†Ô∏è  Tabelas apenas em DESENVOLVIMENTO (3):\n- _migration_issues\n- entidades\n- funcionarios_backup_gestores_final_400\n\n### ‚ö†Ô∏è  Tabelas apenas em PRODU√á√ÉO (2):\n- _backup_fila_emissao_20260204\n- backup_lotes_migracao_20260130\n\n### ‚úÖ Tabelas em comum: 56\n\n## üìã DIFEREN√áAS EM COLUNAS (17)\n\n### auditoria.entidade_id\n**Diferen√ßa:** nullable: NO vs YES\n\n### clinicas_senhas.criado_em\n**Diferen√ßa:** tipo: timestamp with time zone vs timestamp without time zone\n\n### clinicas_senhas.atualizado_em\n**Diferen√ßa:** tipo: timestamp with time zone vs timestamp without time zone; default: null vs CURRENT_TIMESTAMP\n\n### contratantes.ativa\n**Diferen√ßa:** default: true vs false\n\n### empresas_clientes.clinica_id\n**Diferen√ßa:** nullable: NO vs YES\n\n### empresas_clientes.representante_fone\n**Diferen√ßa:** tipo: character varying vs text\n\n### empresas_clientes.representante_email\n**Diferen√ßa:** tipo: character varying vs text\n\n### entidades_senhas.criado_em\n**Diferen√ßa:** tipo: timestamp with time zone vs timestamp without time zone\n\n### entidades_senhas.atualizado_em\n**Diferen√ßa:** tipo: timestamp with time zone vs timestamp without time zone; default: null vs CURRENT_TIMESTAMP\n\n### funcionarios.nivel_cargo\n**Diferen√ßa:** tipo: character varying vs USER-DEFINED\n\n### laudos.arquivo_remoto_key\n**Diferen√ßa:** tipo: character varying vs text\n\n### usuarios.cpf\n**Diferen√ßa:** tipo: character varying vs text\n\n### usuarios.nome\n**Diferen√ßa:** tipo: character varying vs text; nullable: NO vs YES\n\n### usuarios.email\n**Diferen√ßa:** tipo: character varying vs text\n\n### usuarios.criado_em\n**Diferen√ßa:** default: CURRENT_TIMESTAMP vs now()\n\n### usuarios.atualizado_em\n**Diferen√ßa:** default: CURRENT_TIMESTAMP vs now()\n\n### usuarios.tipo_usuario\n**Diferen√ßa:** tipo: USER-DEFINED vs text; default: null vs 'admin'::text\n\n## üîó CONSTRAINTS\n\n### Apenas em DESENVOLVIMENTO (46):\n- _migration_issues._migration_issues_pkey\n- auditoria_laudos.chk_solicitation_has_requester\n- auditoria_laudos.chk_status_valid\n- auditoria_laudos.chk_tipo_solicitante_valid\n- auditoria_laudos.fk_auditoria_laudos_lote_id\n- clinicas.clinicas_entidade_id_fkey\n- clinicas_senhas.clinicas_senhas_clinica_cpf_unique\n- clinicas_senhas.clinicas_senhas_cpf_check\n- clinicas_senhas.clinicas_senhas_cpf_key\n- contratantes.contratantes_pkey1\n- contratantes.contratantes_plano_id_fkey1\n- contratantes_senhas.contratantes_senhas_cpf_key1\n- contratantes_senhas.contratantes_senhas_pkey1\n- empresas_clientes.empresas_clientes_parent_check\n- entidades.chk_contratantes_tipo_valido\n- entidades.contratantes_cnpj_unique\n- entidades.contratantes_email_unique\n- entidades.contratantes_estado_check\n- entidades.contratantes_pkey\n- entidades.contratantes_plano_id_fkey\n- entidades.contratantes_responsavel_cpf_check\n- entidades.contratantes_responsavel_cpf_unique\n- entidades_senhas.contratantes_senhas_cpf_check\n- entidades_senhas.contratantes_senhas_cpf_key\n- entidades_senhas.contratantes_senhas_pkey\n- entidades_senhas.fk_contratantes_senhas_contratante\n- funcionarios.fk_funcionarios_clinica\n- funcionarios.fk_funcionarios_contratante\n- funcionarios.funcionarios_clinica_id_check\n- funcionarios.funcionarios_clinica_id_fkey\n- funcionarios.funcionarios_empresa_id_fkey\n- funcionarios.funcionarios_owner_check\n- funcionarios_entidades.funcionarios_entidades_entidade_fkey\n- laudos.chk_laudos_emissor_when_emitido\n- laudos.chk_laudos_emitido_antes_enviado\n- laudos.chk_laudos_emitido_em_when_emitido\n- laudos.chk_laudos_hash_pdf_valid\n- laudos.chk_laudos_hash_when_emitido\n- laudos.chk_laudos_status_valid\n- laudos.fk_laudos_emissor_cpf\n- laudos.fk_laudos_lote_id\n- usuarios.usuarios_clinica_id_fkey\n- usuarios.usuarios_cpf_check\n- usuarios.usuarios_entidade_id_fkey\n- usuarios.usuarios_gestor_check\n- usuarios.usuarios_tipo_check\n\n### Apenas em PRODU√á√ÉO (18):\n- clinicas.fk_clinicas_contratante\n- clinicas.unique_clinica_contratante\n- clinicas_senhas.clinicas_senhas_cpf_clinica_unique\n- contratantes.chk_contratantes_tipo_valido\n- contratantes.contratantes_cnpj_unique\n- contratantes.contratantes_email_unique\n- contratantes.contratantes_estado_check\n- contratantes.contratantes_pkey\n- contratantes.contratantes_plano_id_fkey\n- contratantes.contratantes_responsavel_cpf_check\n- contratantes.contratantes_responsavel_cpf_unique\n- contratantes_senhas.contratantes_senhas_cpf_key\n- contratantes_senhas.contratantes_senhas_pkey\n- entidades_senhas.entidades_senhas_contratante_id_fkey\n- entidades_senhas.entidades_senhas_cpf_contratante_unique\n- entidades_senhas.entidades_senhas_pkey\n- funcionarios_entidades.funcionarios_entidades_contratante_id_fkey\n- laudos.laudos_status_check\n\n## üîé √çNDICES\n\n### Apenas em DESENVOLVIMENTO (64):\n- _migration_issues._migration_issues_pkey\n- auditoria_laudos.idx_auditoria_laudos_lote_history\n- auditoria_laudos.idx_auditoria_laudos_pending_queue\n- auditoria_laudos.idx_auditoria_laudos_solicitante_criado\n- auditoria_laudos.idx_auditoria_laudos_unique_solicitation\n- clinicas.idx_clinicas_entidade_id\n- clinicas.idx_clinicas_entidade_id_unique\n- clinicas_senhas.clinicas_senhas_clinica_cpf_unique\n- clinicas_senhas.clinicas_senhas_cpf_key\n- clinicas_senhas.idx_clinicas_senhas_clinica_id\n- contratantes.contratantes_pkey1\n- contratantes_senhas.contratantes_senhas_cpf_key1\n- contratantes_senhas.contratantes_senhas_pkey1\n- entidades.contratantes_cnpj_unique\n- entidades.contratantes_email_unique\n- entidades.contratantes_pkey\n- entidades.contratantes_responsavel_cpf_unique\n- entidades.idx_contratantes_aprovado_em\n- entidades.idx_contratantes_ativa\n- entidades.idx_contratantes_cnpj\n- entidades.idx_contratantes_contrato_aceito\n- entidades.idx_contratantes_data_liberacao\n- entidades.idx_contratantes_status\n- entidades.idx_contratantes_status_data_cadastro\n- entidades.idx_contratantes_tipo\n- entidades.idx_contratantes_tipo_ativa\n- entidades.idx_contratantes_tipo_status_ativa\n- entidades_senhas.contratantes_senhas_contratante_cpf_unique\n- entidades_senhas.contratantes_senhas_cpf_key\n- entidades_senhas.contratantes_senhas_pkey\n- entidades_senhas.idx_contratantes_senhas_contratante\n- entidades_senhas.idx_contratantes_senhas_contratante_id\n- entidades_senhas.idx_contratantes_senhas_cpf\n- funcionarios.idx_funcionarios_clinica\n- funcionarios.idx_funcionarios_clinica_empresa\n- funcionarios.idx_funcionarios_clinica_id\n- funcionarios.idx_funcionarios_clinica_perfil_ativo\n- funcionarios.idx_funcionarios_contratante_id\n- funcionarios.idx_funcionarios_cpf_clinica_perfil\n- funcionarios.idx_funcionarios_empresa\n- funcionarios.idx_funcionarios_pendencias\n- funcionarios.idx_funcionarios_perfil_entities\n- laudos.idx_laudos_arquivo_remoto_key\n- laudos.idx_laudos_arquivo_remoto_sync\n- laudos.idx_laudos_emissor_cpf_emitido\n- laudos.idx_laudos_hash_pdf\n- laudos.idx_laudos_job_id\n- lotes_avaliacao.idx_lotes_avaliacao_status_emitido\n- lotes_avaliacao.idx_lotes_emissao_em_andamento\n- lotes_avaliacao.idx_lotes_emissao_solicitada\n- lotes_avaliacao.idx_lotes_emissao_solicitada_liberado\n- lotes_avaliacao.idx_lotes_empresa_status_liberado\n- lotes_avaliacao.idx_lotes_status_criado\n- notificacoes.idx_notificacoes_clinica_id\n- notificacoes.idx_notificacoes_destinatario_cpf\n- notificacoes_admin.idx_notificacoes_admin_contratante\n- notificacoes_admin.idx_notificacoes_admin_lida\n- notificacoes_admin.idx_notificacoes_admin_resolvida\n- usuarios.idx_usuarios_ativo\n- usuarios.idx_usuarios_clinica_id\n- usuarios.idx_usuarios_cpf\n- usuarios.idx_usuarios_entidade_id\n- usuarios.idx_usuarios_tipo_ativo\n- usuarios.idx_usuarios_tipo_usuario\n\n### Apenas em PRODU√á√ÉO (38):\n- audit_logs.idx_audit_logs_resource_id\n- clinicas.idx_clinicas_contratante_id\n- clinicas.unique_clinica_contratante\n- clinicas_senhas.clinicas_senhas_cpf_clinica_unique\n- contratacao_personalizada.idx_contratacao_personalizada_criado_em\n- contratacao_personalizada.idx_contratacao_personalizada_status\n- contratantes.contratantes_cnpj_unique\n- contratantes.contratantes_email_unique\n- contratantes.contratantes_pkey\n- contratantes.contratantes_responsavel_cpf_unique\n- contratantes.idx_contratantes_aprovado_em\n- contratantes.idx_contratantes_ativa\n- contratantes.idx_contratantes_cnpj\n- contratantes.idx_contratantes_contrato_aceito\n- contratantes.idx_contratantes_data_liberacao\n- contratantes.idx_contratantes_status\n- contratantes.idx_contratantes_status_data_cadastro\n- contratantes.idx_contratantes_tipo\n- contratantes.idx_contratantes_tipo_ativa\n- contratantes.idx_contratantes_tipo_status_ativa\n- contratantes_senhas.contratantes_senhas_contratante_cpf_unique\n- contratantes_senhas.contratantes_senhas_cpf_key\n- contratantes_senhas.contratantes_senhas_pkey\n- contratantes_senhas.idx_contratantes_senhas_contratante\n- contratantes_senhas.idx_contratantes_senhas_contratante_id\n- contratantes_senhas.idx_contratantes_senhas_cpf\n- contratos.ux_contratos_payment_link_token\n- entidades_senhas.entidades_senhas_cpf_contratante_unique\n- entidades_senhas.entidades_senhas_pkey\n- entidades_senhas.idx_entidades_senhas_contratante\n- entidades_senhas.idx_entidades_senhas_cpf\n- funcionarios.idx_funcionarios_data_admissao\n- funcionarios.idx_funcionarios_usuario_tipo\n- laudos.idx_laudos_unico_enviado\n- lotes_avaliacao.idx_lotes_avaliacao_status\n- pagamentos.idx_pagamentos_num_funcionarios\n- tokens_retomada_pagamento.idx_tokens_contratante\n- tokens_retomada_pagamento.idx_tokens_token\n\n## ‚ö° TRIGGERS\n\n### Apenas em DESENVOLVIMENTO (13):\n- clinicas_senhas.trg_clinicas_senhas_updated_at\n- clinicas_senhas.trg_protect_senhas\n- entidades.tr_contratantes_sync_status_ativa_personalizado\n- entidades.tr_contratantes_sync_status_ativa_robust\n- entidades.trg_contratantes_updated_at\n- entidades.trg_validar_transicao_status\n- entidades_senhas.trg_contratantes_senhas_updated_at\n- entidades_senhas.trg_prevent_contratante_emissor\n- entidades_senhas.trg_protect_senhas\n- funcionarios.trg_reject_prohibited_roles\n- funcionarios_clinicas.trg_validate_funcionario_clinica_empresa\n- laudos.trg_validar_laudo_emitido\n- usuarios.trg_usuarios_updated_at\n\n### Apenas em PRODU√á√ÉO (9):\n- avaliacoes.trg_recalc_lote_on_avaliacao_change\n- contratantes.tr_contratantes_sync_status_ativa_personalizado\n- contratantes.tr_contratantes_sync_status_ativa_robust\n- contratantes.trg_contratantes_updated_at\n- contratantes.trg_validar_transicao_status\n- contratantes_senhas.trg_prevent_contratante_emissor\n- contratantes_senhas.trg_protect_senhas\n- entidades_senhas.trg_validate_entidade_tipo\n- funcionarios.aaa_trg_set_usuario_tipo\n\n## ‚öôÔ∏è  FUN√á√ïES\n\n### Apenas em DESENVOLVIMENTO (6):\n- fn_audit_clinicas_senhas\n- fn_validar_laudo_emitido\n- trg_reject_prohibited_roles_func\n- update_clinicas_senhas_updated_at\n- update_usuarios_updated_at\n- validate_funcionario_clinica_empresa\n\n### Apenas em PRODU√á√ÉO (12):\n- corrigir_status_avaliacoes\n- fn_create_funcionario_autorizado\n- fn_limpar_tokens_expirados\n- fn_marcar_token_usado\n- fn_reconcluir_lote_for_emergencia\n- fn_validar_status_avaliacao\n- fn_validar_token_pagamento\n- notificar_pre_cadastro_criado\n- notificar_valor_definido\n- set_funcionario_usuario_tipo\n- trg_recalc_lote_on_avaliacao_change\n- validate_entidade_tipo\n\n## üìù ENUMERA√á√ïES (ENUMS)\n\n### Diferen√ßas em valores (4):\n\n**status_avaliacao:**\n- DEV: [pendente, em_andamento, concluido, liberada, iniciada]\n- PROD: [pendente, em_andamento, concluida, liberada, iniciada]\n\n**status_laudo_enum:**\n- DEV: [emitido, enviado]\n- PROD: [emitido, enviado, rascunho]\n\n**status_lote_enum:**\n- DEV: [ativo, cancelado, finalizado, concluido]\n- PROD: [ativo, cancelado, finalizado, concluido, rascunho]\n\n**usuario_tipo_enum:**\n- DEV: [funcionario_clinica, funcionario_entidade, gestor, rh, admin, emissor]\n- PROD: [funcionario_clinica, funcionario_entidade, gestor_rh, gestor_entidade, admin, emissor]\n\n\n---\n\n## ‚ö†Ô∏è  RESULTADO: DISCREP√ÇNCIAS ENCONTRADAS\n\nForam encontradas diferen√ßas entre os bancos de dados. Revisar os itens acima antes de prosseguir com a sincroniza√ß√£o.\n
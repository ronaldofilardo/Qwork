000_create_status_lote_tmp.sql
001_security_rls_rbac.sql
002_add_aguardando_pagamento_to_status_enum.sql
002_enable_rls.sql
003_add_numero_funcionarios_estimado_to_contratantes.sql
003_auditoria_completa.sql
004_add_laudo_enviado_em.sql
004_create_contratos_table.sql
004_rls_rbac_fixes.sql
005_add_acceptance_fields_to_contratos.sql
005_fix_duplicated_fk_and_constraints.sql
006_add_helpers_and_contrato_columns.sql
006_add_representante_cnpj_global.sql
006_centralize_enums.sql
007_add_inativacao_fields.sql
007_add_recibo_fields_to_pagamentos.sql
007_refactor_status_fila_emissao.sql
007a_enum_changes.sql
007b_fila_emissao.sql
007c_triggers_audit.sql
007d_rls.sql
007e_views.sql
008_criar_funcao_criar_notificacao_recibo.sql
008_update_vw_funcionarios_por_lote.sql
009_add_data_admissao_funcionarios.sql
009_fix_gerar_hash_auditoria_timestamptz.sql
009_remove_contrato_columns.sql
010_fix_notificacoes_destinatario_cpf.sql
010_update_vw_funcionarios_por_lote_data_admissao.sql
011_enable_pgcrypto_extension.sql
011_fix_clinicas_empresas_fk.sql
011_fix_vw_funcionarios_por_lote.sql
012_exclude_rh_gestores_from_eligibility.sql
012_remove_redundant_table.sql
012_simplify_laudo_status.sql
013_create_auditoria_laudos.sql
013_fix_avaliacao_lote_status_logic.sql
013_nivel_cargo_not_null.sql
013_remove_rascunho_status.sql
013b_create_nivel_cargo_enum_column.sql
013c_modify_nivel_cargo_constraint_remove_rh.sql
014_add_finalizado_em.sql
014_add_fk_analise_estatistica.sql
014_fix_calcular_elegibilidade_text_cast.sql
015_extend_notificacoes.sql
015_include_boundary_in_calcular_elegibilidade.sql
016_add_ultima_avaliacao_denormalized.sql
016_add_ultima_avaliacao_simple.sql
017_add_laudo_files_columns.sql
017_fix_indice_orfao.sql
019_admin_restrict_to_cadastros.sql
021_add_contratos_payment_fields.sql
023_sistema_notificacoes_fix.sql
023_sistema_notificacoes.sql
024_add_tipo_notificacao_laudo_emitido_automaticamente.sql
024_centro_operacoes_notificacoes.sql
024_prioridade_baixa_features.sql
025_substituir_laudo_emitido_por_enviado.sql
026_allow_laudo_enviado_update_trigger_fix.sql
026_campos_pagamento_completo.sql
027_plano_intermediario.sql
028_adicionar_parcelas_pagamentos.sql
028_correcoes_banco_alto.sql
029_correcoes_rbac_rls.sql
030_add_valor_personalizado_contratos.sql
030_adicionar_detalhes_parcelas_pagamentos.sql
030_immutability_triggers_constraints.sql
030_protecao_senhas_critica.sql
031_sync_contratantes_ativa_status.sql
032_add_inativa_status.sql
033_sync_status_ativa_robust.sql
034_sistema_notificacoes_admin.sql
035_create_pdf_jobs_table.sql
040_cleanup_contratacao_personalizada.sql
041_criar_tabela_recibos.sql
042_add_contratante_id_to_clinicas.sql
042_add_pdf_bytea_to_recibos.sql
042_add_valor_parcela_to_vw_recibos.sql
043_add_payment_fields_contratacao_personalizada.sql
043_create_auditoria_recibos.sql
043_recibos_unique_pagamento_enum_notificacoes.sql
044_add_portuguese_timestamps_contratacao_personalizada.sql
044_create_mat_vw_recibos.sql
044_fix_payment_link_token_unique.sql
045_sync_numero_funcionarios.sql
046_auditoria_campos_criticos.sql
047_fix_payment_first_trigger.sql
048_fix_trigger_rejeitado.sql
050_create_contratos_table.sql
051_create_contratacao_personalizada.sql
052_add_pagamentos_contrato_id.sql
052_cleanup_personalizado_fluxo.sql
052_remove_payment_link_tokens.sql
053_add_contrato_aceito_contratantes.sql
053_add_status_analise.sql
053_restore_payment_columns_contratacao_personalizada.sql
053_trigger_sync_personalizado.sql
054_add_pagamentos_detalhes_parcelas.sql
054_function_criar_conta_responsavel.sql
054_replace_ativo_in_contratos.sql
055_add_nome_fantasia_clinicas.sql
055_admin_empresas_fix.sql
056_create_usuarios_minimal.sql
057_fix_trigger_notificacao_sem_justificativa.sql
058_fix_trigger_colunas_corretas.sql
059_add_status_fluxo_personalizado.sql
059_fix_trigger_valor_definido.sql
060_performance_indexes.sql
061_add_contratante_id_to_lotes_avaliacao.sql
062_add_calcular_elegibilidade_lote_contratante.sql
063_update_rls_policies_for_entity_lotes.sql
064_fix_entidade_perfil_rls.sql
065_laudo_idempotency.sql
066_observability_views.sql
067_audit_contratante_id.sql
068_relax_funcionarios_clinica_check.sql
069_relax_funcionarios_clinica_check_not_valid.sql
070_add_emissao_queue.sql
070_emissor_independente.sql
070_relax_funcionarios_nivel_cargo_check_not_valid.sql
070_relax_funcionarios_owner_check.sql
070_remove_laudo_binary_columns.sql
071_add_data_nascimento_funcionarios.sql
071_fix_funcionarios_clinica_id_check.sql
071_protect_after_emissao.sql
072_fix_funcionarios_clinica_check_include_contratante.sql
072_fix_lote_trigger_allow_date_updates.sql
073_fix_elegibilidade_considera_apenas_concluidas.sql
073_fix_funcionarios_clinica_check_contratante.sql
074_defensive_audit_lote_status_change.sql
074_fix_audit_trigger_allow_null_perfil.sql
074_fix_elegibilidade_indice_atrasado_vs_conclusao_recente.sql
075_add_emissao_automatica_fix_flow.sql
075_apply_indice_avaliacao.sql
076_add_questao_to_respostas.sql
076_create_auditoria_notificacoes.sql
076_defensive_audit_log_function.sql
076_populate_questao_non_concluded_respostas.sql
076_safe_recreate_views.sql
077_add_clinica_id_to_audit_logs.sql
078_fix_audit_log_with_context_ip_cast.sql
078_unify_lote_laudo_ids.sql
079_fix_audit_laudo_creation_column.sql
079_trigger_recalc_lote_on_avaliacao_update.sql
080_fn_reconcluir_lote_for_emergencia.sql
080_readd_hash_pdf_to_laudos.sql
080_update_verificar_inativacao_consecutiva_fixed.sql
080_update_verificar_inativacao_consecutiva.sql
081_enforce_laudo_id_equals_lote.sql
081_remove_liberada_status.sql
082_fix_funcionarios_owner_check_include_admin.sql
082_generate_laudo_immediately_on_concluido.sql
083_sync_lote_laudo_sequences.sql
084_fix_contracts_and_contratantes_columns.sql
084_update_upsert_laudo_for_reserved_ids.sql
085_convert_status_columns_to_enum_fix_defaults.sql
085_lote_id_allocator.sql
086_convert_contratantes_status_with_trigger_handling.sql
086_fn_reservar_laudo_compat_status.sql
087_convert_contratantes_status_with_policy_fix.sql
089_recreate_pagamentos_responsavel_select_with_enum.sql
091_add_aprovacao_fields_to_contratantes.sql
091_remove_legacy_emissor_default.sql
092_create_fn_create_funcionario_autorizado.sql
092_fix_legacy_emissor_update.sql
093_allow_gestor_entidade_with_contratante.sql
093_allow_null_emissor_on_laudos.sql
094_debug_fn_create_funcionario_add_notices.sql
098_add_status_values.sql
098_corrigir_funcao_prevent_lote_mutation.sql
099_allow_null_user_cpf_audit.sql
099_corrigir_funcao_prevent_mutation_during_emission.sql
099_emissor_global_rls.sql
099_fix_validar_transicao_status_enum_comparison.sql
099_remove_legacy_profile.sql
100_add_data_liberacao_login.sql
100_add_trigger_block_mutations_during_emission.sql
100_fix_funcionarios_constraints.sql
100_fix_sync_contratacao_status_enum.sql
1000_adicionar_constraints_tipo.sql
1000_religar_gestores_desconectados.sql
1001_estrutura_roles_e_imutabilidade.sql
1002_adicionar_hashes_laudos.sql
1002_rastreabilidade_emissao_manual.sql
101_add_fila_emissao_unique_constraint.sql
101_drop_constraints_then_fix.sql
101_fix_sync_personalizado_status_enum.sql
101_update_audit_trigger_system_user.sql
102_populate_data_liberacao_login.sql
102_update_rls_processamento_em_policies.sql
103_add_missing_ultima_avaliacao_columns.sql
104_fix_audit_trigger_function.sql
104_remove_super_role.sql
105_fix_audit_trigger_columns.sql
106_add_idempotency_columns_pagamentos.sql
107_add_parcela_numero_recibos.sql
107_add_payment_links.sql
108_add_clinica_id_recibos.sql
108_add_contratante_id_to_funcionarios.sql
109_fix_funcionarios_owner_check_use_contratante_id.sql
110_add_processamento_em.sql
110_include_rh_in_owner_check.sql
111_add_modo_motivo_emergencia.sql
112_canonizar_status_laudo_enviado.sql
113_create_avaliacao_resets.sql
114_consolidate_rls_funcionarios.sql
115_add_representante_columns_if_missing.sql
117_add_missing_relatorio_columns.sql
130_remove_auto_emission_columns.sql
131_replace_recalcular_status_lote_manual.sql
132_create_semantic_views.sql
150_remove_auto_emission_trigger.sql
151_remove_auto_laudo_creation_trigger.sql
152_add_tipo_notificacao_emissao_solicitada.sql
153_restore_manual_emission_requests.sql
200_fase1_normalizacao_usuario_tipo.sql
200_prevent_gestor_emissor.sql
201_fase2_refatorar_rls.sql
201_fix_gestor_entidade_as_funcionario.sql
201_insert_missing_clinicas_from_contratantes.sql
202_remove_lote_and_emissor.sql
202_restrict_admin_funcionarios_to_platform.sql
20260126_add_contratantes_senhas_columns.sql
203_disallow_gestor_entidade_in_funcionarios.sql
204_allow_liberado_por_nullable.sql
205_add_concluida_em_to_avaliacoes.sql
206_add_gestor_entidade_role.sql
207_add_current_user_contratante_id_helper.sql
208_sync_with_neon.sql
209_fix_admin_rls_critical.sql
210_validate_rls_helpers.sql
211_create_dba_maintenance_role.sql
212_consolidate_contratante_relationship.sql
213_cleanup_policy_drops.sql
220_fix_lotes_avaliacao_schema_entity_support.sql
222_add_unique_empresa_numero_ordem.sql
300_update_rls_exclude_gestores.sql
301_cleanup_gestores_funcionarios.sql
302_fix_lote_id_allocator.sql
303_fix_lotes_avaliacao_liberado_por_fk.sql
304_validate_gestores_post_refactor.sql
996_prevent_modification_after_emission.sql
997_fila_emissao_rls_policies.sql
998_fila_emissao_unique_constraint.sql
999_consolidacao_tipo_plano.sql
999_correcoes_criticas_seguranca.sql
999_fix_audit_laudo_trigger.sql
999_fix_contratos_numero_contrato.sql
999_fix_missing_audit_and_validator.sql
999_reserva_id_laudo_on_lote_insert.sql
migration-005-tokens-retomada.sql
migration-006-fix-ativa-default.sql
migration-007-fix-sync-trigger.sql
migration-017-pagamentos-plano-fixo.sql
